# 가로자르기 알고리즘 (Horizontal Guillotine Cutting)

## 0. 대원칙 (Hard Rule)

- **모든 절단은 관통 절단(Guillotine Cut)이다.**
- 부분 절단, 중간 정지 절단은 허용하지 않는다.
- 어떤 단계에서도 이 규칙은 깨지지 않는다.

> 이 문서에서 다루는 모든 로직은 위 대원칙을 전제로 한다.

---

## 1. 문제 정의

- 판재(원장): 2440 × 1220
- 목표:
  - 관통 절단만 사용하여
  - 판재 낭비를 줄이고
  - 절단 흐름이 일관된 **가로자르기 기반 알고리즘**을 정의한다.

본 로직은 SketchCut의 결과를 분석하여 **가로자르기 관점에서 재해석**한 것이다.

---

## 2. 알고리즘의 기본 관점

이 로직은 **"가로자르기 중심 사고"**를 기반으로 한다.

- 모든 판은 항상 **가로 절단 후보**로 먼저 평가된다.
- 세로 절단은 **가로 절단의 결과물(조각)에 대해 수행되는 보조 절단**이다.

즉:

> **가로로 나누고 → 세로로 쪼갠다**

이 흐름이 모든 단계에서 반복된다.

---

## 3. 1단계: 원장의 가로 절단

### 3.1 절단 대상

- 입력 판재: 원장(2440 × 1220)

### 3.2 절단 방식

- 가로 방향으로 관통 절단 수행
- 결과:
  - 여러 개의 **1차 조각(가로 스트립)** 생성
  - 각 조각의 크기: 2440 × h

### 3.3 판단 기준

- 큰 부품의 높이를 우선 고려
- 동일 높이 계열을 하나의 스트립으로 묶는 것이 유리
- 슬리버(의미 없는 얇은 조각) 발생 금지

---

## 4. 2단계: 1차 조각의 세로 절단

### 4.1 절단 대상

- 1단계에서 생성된 **1차 가로 조각들**

### 4.2 절단 방식

- 각 1차 조각을 **새로운 판(원장)** 으로 간주
- 세로 방향 관통 절단 수행

### 4.3 결과

- 폭이 분리된 **2차 조각들** 생성
- 각 조각은 여전히 직사각형이며, 관통 절단만 사용됨

---

## 5. 3단계: 2차 조각 이후의 처리

### 5.1 핵심 개념

- **2차 조각부터는 크기가 충분히 작아진 상태**
- 이 시점부터는:
  - 가로 / 세로 방향을 엄격히 구분할 필요가 없음
  - 어떤 방향이든 관통 절단 가능

> 단, 여전히 **관통 절단이라는 대원칙은 유지**된다.

### 5.2 처리 방식

- 2차 조각을 다시 "원장"으로 취급
- 남은 부품을 배치하기 위해:
  - 가로 관통 또는 세로 관통 중
  - 더 많은 부품이 들어가는 방향 선택

- 필요 시 이 과정을 **재귀적으로 반복**

---

## 6. 알고리즘의 본질 요약

이 로직은 다음과 같이 요약된다.

```text
[대원칙]
- 모든 절단은 관통한다

[사고 흐름]
1. 항상 가로 절단을 먼저 고려한다
2. 가로 절단으로 나온 조각을 다시 판으로 본다
3. 필요하면 세로로 관통 절단한다
4. 생성된 조각은 다시 원장으로 취급한다
5. 이 과정을 더 이상 이득이 없을 때까지 반복한다
```

---

## 7. SketchCut과의 관계

- SketchCut 역시 **관통 절단만 사용**한다
- 차이는 규칙이 아니라 **재귀 깊이와 멈추는 시점**이다

| 항목 | SketchCut | 현재 가로자르기 로직 |
|---|---|---|
| 관통 절단 | 항상 | 항상 |
| 가로 절단 우선 | 예 | 예 |
| 세로 절단 사용 | 예 | 예 |
| 재귀 깊이 | 깊음 | 제어 가능 |
| 목표 | 면적 극대화 | 절단 안정 + 예측성 |

---

## 8. 결론

- 이 문서는 **가로자르기 알고리즘의 불변 구조**를 정의한다.
- 핵심은 방향이 아니라:

> **"생성된 모든 직사각형을 다시 원장으로 보고, 관통 절단만으로 재귀 처리한다"**

이 원칙을 유지하는 한,
- SketchCut과 동일 계열의 결과를 낼 수 있으며
- 동시에 현장 제약을 침범하지 않는다.

---

(문서 끝)